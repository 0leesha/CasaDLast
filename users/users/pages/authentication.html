<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - Casa D Last</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/authentication.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="brand-section">
                <div class="brand-logo">Casa D Last</div>
                <p class="brand-tagline">Welcome to your home away from home</p>
            </div>

            <!-- Alert Messages -->
            <div id="alert-container"></div>

            <!-- Auth Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Sign In</button>
                <button class="auth-tab" data-tab="register">Sign Up</button>
            </div>

            <!-- Login Form -->
            <div id="login-form" class="form-section active">
                <form onsubmit="handleLogin(event)">
                    <div class="mb-3">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="login-email" required placeholder="you@example.com">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Password</label>
                        <div class="password-field">
                            <input type="password" class="form-control" id="login-password" required placeholder="Enter your password">
                            <button type="button" class="password-toggle" onclick="togglePassword('login-password')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="remember-me">
                        <label class="form-check-label" for="remember-me" style="font-size: 0.9rem;">
                            Remember me
                        </label>
                    </div>

                    <div class="forgot-password">
                        <a href="#" onclick="showForgotPassword(event)">Forgot Password?</a>
                    </div>

                    <button type="submit" class="btn-auth">Sign In</button>
                </form>
            </div>

            <!-- Register Form -->
            <div id="register-form" class="form-section">
                <form onsubmit="handleRegister(event)">
                    <div class="mb-3">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="register-name" required placeholder="John Doe">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="register-email" required placeholder="you@example.com">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Password</label>
                        <div class="password-field">
                            <input type="password" class="form-control" id="register-password" required placeholder="Create a strong password" minlength="8">
                            <button type="button" class="password-toggle" onclick="togglePassword('register-password')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <small class="text-muted">At least 8 characters</small>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Confirm Password</label>
                        <div class="password-field">
                            <input type="password" class="form-control" id="register-confirm" required placeholder="Confirm your password">
                            <button type="button" class="password-toggle" onclick="togglePassword('register-confirm')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="terms" required>
                        <label class="form-check-label terms-text" for="terms">
                            I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
                        </label>
                    </div>

                    <button type="submit" class="btn-auth">Create Account</button>
                </form>

            </div>

            <!-- Forgot Password Form -->
            <div id="forgot-form" class="form-section">
                <div class="text-center mb-4">
                    <h5 style="color: var(--dark-coffee); font-weight: 600;">Reset Password</h5>
                    <p style="color: var(--soft-brown); font-size: 0.9rem;">Enter your email and we'll send you a reset link</p>
                </div>

                <form onsubmit="handleForgotPassword(event)">
                    <div class="mb-3">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="forgot-email" required placeholder="you@example.com">
                    </div>

                    <button type="submit" class="btn-auth">Send Reset Link</button>
                    
                    <div class="text-center mt-3">
                        <a href="#" onclick="showLogin(event)" style="color: var(--coffee); text-decoration: none; font-size: 0.9rem;">
                            <i class="bi bi-arrow-left"></i> Back to Sign In
                        </a>
                    </div>
                </form>
            </div>
        </div>

        <div class="back-home">
            <a href="index.html">
                <i class="bi bi-house"></i>
                Back to Home
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Tab switching
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding form
                document.querySelectorAll('.form-section').forEach(form => form.classList.remove('active'));
                document.getElementById(`${tabName}-form`).classList.add('active');
                
                // Clear alerts
                clearAlerts();
            });
        });
        
        // Toggle password visibility
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = field.nextElementSibling.querySelector('i');
            
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.replace('bi-eye', 'bi-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.replace('bi-eye-slash', 'bi-eye');
            }
        }

        // Show alert
        function showAlert(message, type = 'success') {
            const alertContainer = document.getElementById('alert-container');
            alertContainer.innerHTML = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" onclick="clearAlerts()"></button>
                </div>
            `;
            alertContainer.querySelector('.alert').style.display = 'block';
        }

        // Clear alerts
        function clearAlerts() {
            document.getElementById('alert-container').innerHTML = '';
        }

        // Handle login
function handleLogin(e) {
    e.preventDefault();

    const email = document.getElementById('login-email').value;

    const user = {
        name: email.split('@')[0],
        email,
        loggedIn: true
    };

    localStorage.setItem('user', JSON.stringify(user));

    showAlert('Successfully signed in! Redirecting...', 'success');

    setTimeout(() => {
        const redirectUrl = localStorage.getItem('redirectAfterLogin');
        if (redirectUrl) {
            localStorage.removeItem('redirectAfterLogin');
            window.location.href = redirectUrl;
        } else {
            window.location.href = 'user_dashboard.html';
        }
    }, 1000);
}
function handleRegister(e) {
    e.preventDefault();

    const name = document.getElementById('register-name').value;
    const email = document.getElementById('register-email').value;

    const user = {
        name,
        email,
        loggedIn: true
    };

    localStorage.setItem('user', JSON.stringify(user));

    showAlert('Account created successfully! Redirecting...', 'success');

    setTimeout(() => {
        window.location.href = 'user_dashboard.html';
    }, 1000);
}

// Handle forgot password
function handleForgotPassword(e) {
    e.preventDefault();
    
    const email = document.getElementById('forgot-email').value;
    
    // Simulate sending reset email
    console.log('Reset password for:', email);
    
    showAlert('Password reset link sent to your email!', 'success');
    
    setTimeout(() => {
        showLogin();
    }, 2000);
}

// Show forgot password form
function showForgotPassword(e) {
    if (e) e.preventDefault();
    
    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.form-section').forEach(form => form.classList.remove('active'));
    document.getElementById('forgot-form').classList.add('active');
    clearAlerts();
}

// Show login form
function showLogin(e) {
    if (e) e.preventDefault();
    
    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-tab="login"]').classList.add('active');
    document.querySelectorAll('.form-section').forEach(form => form.classList.remove('active'));
    document.getElementById('login-form').classList.add('active');
    clearAlerts();
}




    </script>
</body>
</html>